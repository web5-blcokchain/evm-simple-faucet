# EVM 区块链水龙头项目介绍

## 一、项目背景

在区块链开发和测试过程中，开发者常常需要便捷地获取测试网络（Testnet）上的代币（如ETH、BNB、MATIC等）以进行合约部署和DApp调试。为降低开发门槛、提升效率，我们决定实现一个极简、无需后端服务器的水龙头（Faucet）网站，帮助用户快速领取测试代币。

## 二、项目描述

本项目采用"纯前端+私钥钱包"方案：前端页面内置一个专用测试钱包的私钥，用户输入自己的钱包地址后，前端直接用该私钥发起链上转账，将测试币发送给用户。该方案实现极为简单，适合临时、低风险的测试场景。

## 三、项目功能列表

1. **原生测试币领取**：支持主流EVM测试链（如Goerli、Sepolia、BNB Chain Testnet、Polygon Mumbai等）的原生测试币发放。
2. **ERC20测试代币领取**：可扩展支持ERC20等测试代币，前端通过合约转账实现。
3. **多链切换**：支持多条EVM测试链，用户可选择目标链。
4. **钱包地址校验**：前端校验用户输入的钱包地址格式。
5. **基础防刷措施**：如本地存储领取时间、简单验证码等（仅作基础防护，无法防止脚本批量领取）。
6. **领取结果展示**：显示转账结果和交易哈希。

## 四、项目技术栈

- **前端**：
  - JavaScript (ES6+)
  - Bootstrap 5（UI 框架）
  - ethers.js v6（区块链交互）
- **无后端服务器**：所有逻辑均在前端实现。

## 五、项目开发计划

1. **需求梳理与测试钱包准备**
   - 选择支持的测试链和代币类型
   - 创建并充值专用测试钱包
2. **前端开发**
   - UI设计与实现（链选择、地址输入、领取按钮、结果展示）
   - 钱包地址校验、基础防刷逻辑
   - 使用ethers.js集成私钥钱包并发起链上转账
3. **测试与优化**
   - 多链、多币种领取测试
   - 前端交互与体验优化
4. **上线与维护**
   - 部署静态页面
   - 定期更换私钥、补充测试币

## 六、优缺点与安全警告

### 优点
- 实现极其简单，无需后端服务器和复杂合约
- 适合内部开发、临时演示、极小额测试币发放
- 部署和维护成本极低

### 缺点
- 私钥暴露在前端，极易被盗取，安全性极低
- 仅适用于测试网和极小额场景，严禁用于主网或大额资产
- 防刷能力有限，无法防止脚本批量领取

### 安全警告
- 本方案仅供开发测试，私钥极易泄露，请勿用于主网或大额资产
- 建议水龙头钱包余额保持较低，定期更换私钥
- 页面应显著提示"仅供测试，严禁用于生产环境"

## 七、适用场景
- 内部开发测试、临时演示、极小额测试币发放
- 不适用于正式产品或公开大规模使用

## 八、操作流程示例
1. 管理员创建测试钱包，充值少量测试币
2. 将私钥配置到前端代码中（如  JS 变量）
3. 用户访问页面，选择链和代币，输入地址，点击领取
4. 前端用 ethers.js 通过私钥签名并发起转账
5. 用户收到测试币，页面显示交易哈希

## 九、页面原型图与操作流程

### 页面原型图（文字描述）

```
+------------------------------------------------------+
|              EVM 测试币水龙头（Faucet）              |
+------------------------------------------------------+
| 1. 选择测试链： [下拉选择框：Goerli、Sepolia等]      |
|                                                      |
| 2. 选择代币类型： [下拉选择框：ETH、ERC20等]         |
|                                                      |
| 3. 水龙头钱包余额：                                  |
|    - Native余额： 0.1234 ETH                         |
|    - 代币余额：  1000.00 USDT                        |
|                                                      |
| 4. 输入钱包地址： [___________________________]      |
|                                                      |
| 5. 验证码（可选）： [_____] [刷新]                   |
|                                                      |
| 6. [领取测试币] 按钮                                 |
|                                                      |
| 7. 领取结果展示区：                                  |
|    - 领取状态：成功/失败                             |
|    - 交易哈希：[0x1234...abcd]（可跳转区块链浏览器）  |
|    - 领取时间、额度等                                |
|    - 错误信息（如有）                                |
|                                                      |
| 8. 安全提示：仅供测试，严禁用于生产环境               |
+------------------------------------------------------+
| 9. 页脚：项目说明/联系方式等                         |
+------------------------------------------------------+
```

### 主要交互说明
- 用户依次选择测试链、代币类型，输入钱包地址。
- 可选：输入验证码，防止简单脚本刷取。
- 点击"领取测试币"按钮，前端发起链上转账。
- 下方展示领取结果、交易哈希或错误提示。
- 显著位置展示安全警告。

### 详细操作流程
1. 用户访问水龙头页面。
2. 选择目标测试链（如Goerli、Sepolia等）。
3. 选择领取的代币类型（如ETH、ERC20等）。
4. 输入自己的EVM钱包地址。
5. （可选）输入验证码，防止简单刷取。
6. 点击"领取测试币"按钮。
7. 前端校验地址格式、频率等，调用ethers.js用内置私钥发起转账。
8. 页面展示领取结果和交易哈希。
9. 用户在钱包中查收测试币。
10. 如遇错误，页面展示错误信息并引导用户重试。

---

如需页面设计图，可后续补充Figma、MasterGo等设计稿链接。 

## 十、页面与配置细节补充（代码实现约束）

### 1. 领取结果与区块链账号余额展示
- 领取操作后，页面需**清晰展示如下信息**：
  - 交易哈希（Transaction Hash），并可跳转到区块链浏览器查看详情
  - 领取结果（成功/失败），如失败需显示错误原因
  - 领取梳理（如领取时间、领取额度等）
- 用户选择代币类型后，页面需**实时展示水龙头钱包在当前链上的余额**：
  - Native Token 余额（如ETH、BNB、MATIC等）
  - 所选ERC20代币余额（如USDT、DAI等）
- 余额信息应在用户切换链或代币类型时自动刷新

#### 页面原型图细节补充（文字描述）
```
+------------------------------------------------------+
|              EVM 测试币水龙头（Faucet）              |
+------------------------------------------------------+
| 1. 选择测试链： [下拉选择框：Goerli、Sepolia等]      |
|                                                      |
| 2. 选择代币类型： [下拉选择框：ETH、ERC20等]         |
|                                                      |
| 3. 水龙头钱包余额：                                  |
|    - Native余额： 0.1234 ETH                         |
|    - 代币余额：  1000.00 USDT                        |
|                                                      |
| 4. 输入钱包地址： [___________________________]      |
|                                                      |
| 5. 验证码（可选）： [_____] [刷新]                   |
|                                                      |
| 6. [领取测试币] 按钮                                 |
|                                                      |
| 7. 领取结果展示区：                                  |
|    - 领取状态：成功/失败                             |
|    - 交易哈希：[0x1234...abcd]（可跳转区块链浏览器）  |
|    - 领取时间、额度等                                |
|    - 错误信息（如有）                                |
|                                                      |
| 8. 安全提示：仅供测试，严禁用于生产环境               |
+------------------------------------------------------+
| 9. 页脚：项目说明/联系方式等                         |
+------------------------------------------------------+
```

### 2. 支持网络与代币的可配置性
- 支持的区块链网络和代币信息需**通过配置文件统一管理**，便于后续扩展和维护。
- 每个网络配置项包括：
  - 网络名称（如Goerli、Sepolia、BNB Chain Testnet等）
  - RPC URL
  - Chain ID
  - 区块链浏览器URL模板（用于跳转交易哈希）
  - 水龙头钱包地址（用于余额查询）
- 每个代币配置项包括：
  - 代币名称（如ETH、USDT、DAI等）
  - 代币类型（Native/ERC20）
  - 代币合约地址（Native为空）
  - 代币精度（decimals）
  - 归属网络（与网络配置关联）
- 配置示例（伪代码）：
```js
const networks = [
  {
    name: 'Goerli',
    chainId: 5,
    rpcUrl: 'https://goerli.infura.io/v3/xxx',
    explorerUrl: 'https://goerli.etherscan.io/tx/',
    faucetAddress: '0xFaucetWallet...',
    tokens: [
      {
        name: 'ETH',
        type: 'native',
        contract: '',
        decimals: 18
      },
      {
        name: 'USDT',
        type: 'erc20',
        contract: '0xTokenAddress...',
        decimals: 6
      }
    ]
  },
  // ...更多网络
];
```
- 页面根据配置自动生成链和代币选择项，余额查询、转账等操作均依赖配置。

---

> 以上细节为后续代码实现的强约束，确保页面功能、交互和配置灵活性。 

## 十一、验证码实现细节（强约束）

- 领取测试币前，用户必须正确填写验证码，验证码为**必填项**。
- 验证码类型为**简单算术验证码**，如"3 + 7 = ?"。
- 验证码由前端页面随机生成，答案仅在前端校验。
- 用户输入错误时，禁止领取并提示错误，可点击"刷新验证码"重新生成。
- 验证码仅用于防止误操作和极少量手动刷币，对自动化攻击无效。
- 页面原型需包含验证码输入框和刷新按钮，未填写或填写错误时"领取测试币"按钮禁用。

> 以上为代码实现的强约束，所有领取操作必须通过前端算术验证码校验。 